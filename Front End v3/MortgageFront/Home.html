<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width = device-width,initial-
          scale = 1" />

    <title>
        Mortàge
    </title>

    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" />

    <style>
        #top {

            height :1200px;
            width: 100%;
            margin-left: auto;
            margin-right: auto;
        }
        #info{
            background-color:white;
        }
        #left{
            float: left;
        }
        #leftTable {
            float: left;
            background-color:white;
            width:40%;
        }
        #right{
            float:right;
            background-color:white;
        }
        #rightTable{
            float:right;
            background-color:white;
            width:40%;
        }
        #bottomTable {

            background-color: white;

        }

        #image{
           height:160px;
           width:100%;

        }

        #foot {
            position: absolute;
            width: 100%;
            margin-top: 40px;
        }
        #applyLeft{
            float:left;
            width:50%;
        }
        #applyRight{
            float:right;
            width:50%;
        }
        #titlError,#descError, #errorSSN,#errorMT,#mortDescrError,.addressError{
            color:orangered;
        }
        #cancelPayment{
            float:right;
        }


            
    </style>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

    <script>


		function fillData(){
		
            
            document.getElementById("welcome").innerHTML = "Welcome Back, " + sessionStorage.getItem('userName');
            document.getElementById("accountInfo").innerHTML = "Total Balance: $" + 4200.23 + "< br /> Number of Mortgages: " + 33 + "< br /> Active Cases: "+33;


		
		}
		
		function killSession(){ 
		
			sessionStorage.clear();
		
		}
		
	
        function loadHome() {
            $(document).ready(function () {
                $('#mortgage').slideUp(500);
                $('#home').slideDown(500);
                $('#service').slideUp(500);
                $('#apply').slideUp(500);
                $('#help').slideUp(500);

            });
        }
        function loadMortgage() {
            $(document).ready(function () {
                $('#mortgage').slideDown(500);
                $('#home').slideUp(500);
                $('#service').slideUp(500);
                $('#apply').slideUp(500);
                $('#help').slideUp(500);

            });
        }
        function loadApply() {
            $(document).ready(function () {
                $('#mortgage').slideUp(500);
                $('#home').slideUp(500);
                $('#service').slideUp(500);
                $('#apply').slideDown(500);
                $('#help').slideUp(500);

            });
        }
        function loadService() {
            $(document).ready(function () {
                $('#mortgage').slideUp(500);
                $('#home').slideUp(500);
                $('#service').slideDown(500);
                $('#apply').slideUp(500);
                $('#help').slideUp(500);


            });
        }

        function loadHelp() {
            $(document).ready(function () {
                $('#mortgage').slideUp(500);
                $('#home').slideUp(500);
                $('#service').slideUp(500);
                $('#apply').slideUp(500);
                $('#help').slideDown(500);

            });
        }

            
            function caseValidate() {
                var titl = document.getElementById("titl").value;
                var desc = document.getElementById("desc").value;
                var logi = false;
                var titb = false;
                var dscb = false;
                


                if (titl == "") {
                    titb = false;
                    $(document).ready(function () {
                        $('#titlError').show(500);
                        
                    });

                }
                else {
                    titb = true;
                    $(document).ready(function () {
                        $('#titlError').hide(500);
                        
                    });
                }

                if (desc == "") {
                    dscb = false;
                    $(document).ready(function () {
                        $('#descError').show(500);
                        
                    });
                    

                }
                else {
                    dscb = true;
                    $(document).ready(function () {
                        $('#descError').hide(500);
                        
                    });
                    
                }

                if (dscb && titb) {
                    return true;
                }
                else {
                    return false;
                }

            }

        function caseSubmit() {
            caseValidate();

            if (caseValidate()) {
                var Case = {
                    "Case": [

                        {
                            "Mortgage": document.getElementById("titl").value,
                            "caseDescription": document.getElementById("desc").value
                        }
                    ]
                };
                console.log(Case);
            }

        }

        function payment() {
            $(document).ready(function () {
                $('#rTable').slideUp(500);
                $('#makePayment').slideDown(500);
            });
        }

        function cancelPayment() {
            $(document).ready(function () {
                $('#makePayment').slideUp(500);
                $('#rTable').slideDown(500);
            });
        }
        function reason() {
            $(document).ready(function () {
                $('#lTable').slideUp(500);
                $('#reason').slideDown(500);
            });
        }

        function cancelReason() {
            $(document).ready(function () {
                $('#reason').slideUp(500);
                $('#lTable').slideDown(500);
            });
        }

        function openCase(){
            $(document).ready(function () {
                $('#caseTable').slideUp(500);
                $('#case').slideDown(500);
            });
        }

        function closeCase() {
            $(document).ready(function () {
                $('#caseTable').slideDown(500);
                $('#case').slideUp(500);
            });
        }

		





		
		
        
		

        //Mortgage Apply form validation


        function mortDescr() {
            var mortDescr = document.getElementById("mortDescr").value;

            if (mortDescr === "") {
                $(document).ready(function () {
                    $('mortDescrError').slideDown(500);
                });
                return false;
            }
            else {
                $(document).ready(function () {
                    $('mortDescrError').slideUp(500);
                });
                return true;
            }

        }

        

        function checkAmount() {
            var amount = document.getElementById("applicationAmount").value;
            

            if (Number(amount) < 1000) {
                document.getElementById("applicationAmount").value = 1000;
            }
        }

        function checkSSN() {
            var SSN = document.getElementById("SSN").value;
            
            var ssnPattern = /^[0-9]{3}\-?[0-9]{2}\-?[0-9]{4}$/;
            if (!ssnPattern.test(SSN)) {
                $(document).ready(function () {
                    $('#errorSSN').slideDown(500);
                });
                document.getElementById("SSN").value = "";
                return false;
            }
            else {
                $(document).ready(function () {
                    $('#errorSSN').slideUp(500);
                });
                return true;
            }
            
        }

        function checkTitle(){

            var title = document.getElementById("mortgageTitle").value;

            if (title === "") {
                $(document).ready(function () {
                    $('#errorMT').slideDown(500);
                });
                return false;
            }
            else {
                $(document).ready(function () {
                    $('#errorMT').slideUp(500);
                });
                return true;
            }
        }

        function checkAddress() {
            var fname = document.getElementById("first-name").value;
            var lname = document.getElementById("last-name").value;
            var line1 = document.getElementById("address-line1").value;
            var city  = document.getElementById("city").value;
            var regin = document.getElementById("region").value;
            var zip = document.getElementById("postal-code").value;

            if (fname === "" || lname === "" || line1 === "" || city === "" || regin === "" || zip === "") {
                $(document).ready(function () {
                    $('.addressError').slideDown(500);
                });
                return false;
            }
            else {
                $(document).ready(function () {
                    $('.addressError').slideUp(500);
                });
                return true;
            }

        }


        function applyValidate() {
            mortDescr();
            checkAmount();
            checkSSN();
            checkTitle();
            checkAddress();
            if (mortDescr() & checkSSN() & checkTitle() & checkAddress()) {
                {

                    //checks if all conditions are evaluating true
                    //alert(String(mortDescr()) + " " + String(checkSSN()) + " " + String(checkTitle()) + " " + String(checkAddress()));


                    var Application = {
                        "MortgageApplication": [

                            {
                                "ssn": document.getElementById("SSN").value, "currency": document.getElementById("currency").value,
                                "mortgageTitle": document.getElementById("mortgageTitle").value, "description": document.getElementById("mortDescr").value,
                                "amount": document.getElementById("applicationAmount").value, "firstName": document.getElementById("first-name").value,
                                "lastName": document.getElementById("last-name").value, "address1": document.getElementById("address-line1").value,
                                "address2": document.getElementById("address-line2").value, "cityOrTown": document.getElementById("city").value,
                                "stateOrProvince": document.getElementById("region").value, "zip": document.getElementById("postal-code").value,
                                "country": document.getElementById("country").value, "owner":"temp"
                            }
                        ]
                    };
                    console.log(Application);

                    
                        $.ajax({

                            type: 'POST',

                            url: 'http://localhost:52721/api/application',

                            data: JSON.stringify(Application),

                            contentType: "application/json",

                            dataType: 'JSON',

                            success: function () {

                                console.log("Success");

                            },

                            Error: function () {

                                console.log("ERROR");

                            }

                        });

                    
                }
            }

        }

        function payValidate() {
            
            var payment = document.getElementById("payment").value;
            if (Number(payment) < 1) {
                document.getElementById("payment").value = 1;
                $(document).ready(function () {
                    $('#paymentError').slideDown(500);
                    $('#paymentError').slideUp(3000);
                });
            }

        }

        


    </script>

</head>
<body onload="fillData()">


    <img id="image" src="Background.jpg" class="img-fluid" alt="Responsive image">

    <nav class="navbar navbar-inverse">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" onclick="loadHome()" href="#">Home</a>
            </div>
            <ul class="nav navbar-nav">
                <li onclick="loadMortgage()"><a href="#">My Mortgages</a></li>
                <li onclick="loadApply()"><a href="#">Apply</a></li>
                <li onclick="loadService()"><a href="#">Customer Service</a></li>
                <li onclick="loadHelp()"><a href="#">Help</a></li>
                <li class="active" id="logout" onlclick = "killSession()"><a href="Login.html">Logout</a></li>
            </ul>
        </div>
    </nav>
    <div class="container">


        <br /><br />


              <div class="jumbotron" id="top">

                  <div id="home">

                      <div class="jumbotron" id="info">
                          <h2 id="welcome"> Welcome Back, John Doe</h2>
                          <h4 id="accountInfo">  Total Balance:$0.00<br />Number of Mortgages: 0<br />Active Cases: 0<br /></h4>
                      </div>
                      <div id="homecontent">

                          <div id="left"><h2>Current APR: 1234</h2><br />stuff<br />stuff<br />stuff<br /></div>
                          <div class="jumbotron" id="right">
                              <h2>Recent Mortgages</h2>
                              <table class="table table-hover">
                                  <thead>
                                      <tr>
                                          <th>Mortgage Name</th>
                                          <th>Mortgage Balance</th>
                                          <th>Next Payement Due</th>
                                      </tr>
                                  </thead>
                                  <tbody>
                                      <tr>
                                          <td>example house</td>
                                          <td>$120.00</td>
                                          <td>11/11/11</td>
                                      </tr>
                                      <tr>
                                          <td>shows</td>
                                          <td>$120.00</td>
                                          <td>11/11/11</td>
                                      </tr>
  

                                  </tbody>
                              </table>
                          </div>

                      </div>
                  </div>

                  <div id="mortgage" style="display:none">
                      <div class="jumbotron" id="info">
                          <h2> Total Balance: $0.00 <br /></h2>
                          <h3> Number of outstanding loans: 0 <br /></h3>
                      </div>


                      <div id="homecontent">
                          <div class="jumbotron" id="leftTable">
                              <h2>Mortgage Applications</h2>
                              <div id="lTable">
                                  <table class="table table-hover">
                                      <thead>
                                          <tr>
                                              <th>Mortgage Application Name</th>
                                              <th>Status</th>
                                          </tr>
                                      </thead>
                                      <tbody>
                                          <tr>
                                              <td>example house</td>
                                              <td>declined <button onclick="reason();">Reason</button></td>
                                          </tr>

                                      </tbody>
                                  </table>
                              </div>
                              <div id="reason" style="display:none">
                                  <button id="cancelPayment" onclick="cancelReason()" type="button" class="close" aria-label="Close">
                                      <span aria-hidden="true">&times;</span>
                                  </button>
                                  <br /><br />
                                  Mortgage loan declined due to insufficient credit score.
                              </div>
                          </div>
                          <div class="jumbotron" id="rightTable">
                              <h2>Active Mortgages</h2>
                              <div id="rTable">
                                  <table class="table table-hover">
                                      <thead>
                                          <tr>
                                              <th>Mortgage Name</th>
                                              <th>Mortgage Balance</th>
                                          </tr>
                                      </thead>
                                      <tbody>
                                          <tr>
                                              <td>example house</td>
                                              <td>$120.00 <button onclick="payment()">Make A payment</button></td>

                                          </tr>

                                      </tbody>
                                  </table>
                              </div>
                              <div id="makePayment" style="display:none">
                                  <button id="cancelPayment" onclick="cancelPayment()" type="button" class="close" aria-label="Close">
                                      <span aria-hidden="true">&times;</span>
                                  </button>
                                  <br /><br />
                                  Payment Amount:<br /><input id="payment" onblur="payValidate()" type="number" placeholder="0.00" step=".01"  />
								  <div class="addressError"id="paymentError" style="display:none">
										You cannot make payments less than $1.00
								  </div>
                                  <br /><br />
                                  <button type="submit" class="btn btn-warning" role="button" onclick="payValidate()">Submit</button>

                              </div>

                          </div>
                      </div>

                  </div>


                  <div id="apply" style="display:none">

                      <h1>Apply for a new Mortgage:</h1>
                      <div class="container" id="applyLeft">
                          <form id="newMortgage">

                              <br /><br /><br />
                              Amount:<br /><input type="number" placeholder="0.00" step=".01" id="applicationAmount" onblur="checkAmount()" />
                              <br />
                              Currency:<br />
                              <select id="currency">
                                  <option selected="selected" value="USD">USD</option>
                                  <option value="CAD">CAD</option>
                              </select>
                              <br /><br />

                              SSN: <br /><input type="text" id="SSN" placeholder="xxx-xx-xxxx" onblur="checkSSN()" />
                              <div id="errorSSN" style="display:none">
                                  Please Enter a valid SSN
                              </div>
                              <br /><br /><br />
                              Mortgage Title:<br />
                              <input type="text" id="mortgageTitle" onblur="checkTitle()" />
                              <div id="errorMT" style="display:none">
                                  Title cannot be blank
                              </div>
                              <br /><br />
                              Description:<br />
                              <br /><br />
                              <textarea id="mortDescr" rows="6" cols="50" onblur="mortDescr()"> </textarea>
                              <div id="mortDescrError" style="display:none">
                                  Description cannot be blank
                              </div>
                              <br /><br />
                              <button type="submit" class="btn btn-warning" role="button" onclick="applyValidate()">Submit</button>
                              <div id="noFields" style="display:none"><br />All fields must be filled out</div>
                          </form>

                      </div>
                      <div class="container" id="applyRight">
                          
                          <br /><br /><br />
                          <!-- Got this from https://bootsnipp.com/snippets/featured/generic-postal-address-form -->
                          <div class="row">
                              <form class="form-horizontal" id="addressForm" >
                                  <fieldset>
                                      <!-- Address form -->

                                      <h2>Address</h2>

                                      <!-- full-name input-->
                                      <div class="control-group">
                                          <label class="control-label">First Name</label>
                                          <div class="controls">
                                              <input id="first-name" onblur="checkAddress()" name="first-name" type="text" placeholder="first name"
                                                     class="input-xlarge">
                                              <div class="addressError" style="display:none">
                                                  Required Field
                                              </div><br />
                                              <label class="control-label">Last Name</label>
                                              <br />
                                              <input id="last-name" onblur="checkAddress()" name="last-name" type="text" placeholder="last name"
                                                     class="input-xlarge">
                                              <div class="addressError" style="display:none">
                                                  Required Field
                                              </div>
                                              <p class="help-block"></p>
                                          </div>
                                      </div>
                                      <!-- address-line1 input-->
                                      <div class="control-group">
                                          <label class="control-label">Address Line 1</label>
                                          <div class="controls">
                                              <input id="address-line1" onblur="checkAddress()" name="address-line1" type="text" placeholder="address line 1"
                                                     class="input-xlarge">
                                              <div class="addressError" style="display:none">
                                                  Required Field
                                              </div>
                                              <p class="help-block">Street address, P.O. box, company name, c/o</p>
                                          </div>
                                      </div>
                                      <!-- address-line2 input-->
                                      <div class="control-group">
                                          <label class="control-label">Address Line 2</label>
                                          <div class="controls">
                                              <input id="address-line2" name="address-line2" type="text" placeholder="address line 2"
                                                     class="input-xlarge">
                                              <p class="help-block">Apartment, suite , unit, building, floor, etc.</p>
                                          </div>
                                      </div>
                                      <!-- city input-->
                                      <div class="control-group">
                                          <label class="control-label">City / Town</label>
                                          <div class="controls">
                                              <input id="city" onblur="checkAddress()" name="city" type="text" placeholder="city" class="input-xlarge">
                                              <div class="addressError" style="display:none">
                                                  Required Field
                                              </div>
                                              <p class="help-block"></p>
                                          </div>
                                      </div>
                                      <!-- region input-->
                                      <div class="control-group">
                                          <label class="control-label">State / Province / Region</label>
                                          <div class="controls">
                                              <input id="region" name="region" onblur="checkAddress()" type="text" placeholder="state / province / region"
                                                     class="input-xlarge">
                                              <div class="addressError" style="display:none">
                                                  Required Field
                                              </div>
                                              <p class="help-block"></p>

                                          </div>
                                      </div>
                                      <!-- postal-code input-->
                                      <div class="control-group">
                                          <label class="control-label">Zip / Postal Code</label>
                                          <div class="controls">
                                              <input id="postal-code" onblur="checkAddress()" name="postal-code" type="text" placeholder="zip or postal code"
                                                     class="input-xlarge">
                                              <div class="addressError" style="display:none">
                                                  Required Field
                                              </div>
                                              <p class="help-block"></p>
                                          </div>
                                      </div>
                                      <!-- country select -->
                                      <div class="control-group">
                                          <label class="control-label">Country</label>
                                          <div class="controls">
                                              <select id="country" name="country" class="input-xlarge">
                                                  <option value="">(please select a country)</option>
                                                  <option value="CA">Canada</option>
                                                  <option value="US" selected="selected">United States</option>
                                              </select>

                                          </div>


                                      </div>
                                  </fieldset>
                                  <div class="addressError" style="display:none">
                                      Please fill out required fields
                                  </div>
                              </form>

                          </div>
                      </div>
                  </div>

                  <div id="service" style="display:none">
                      <form id="cases">
                          <h1>Customer Service Center</h1>
                          <br /><br />
                          <h3>New Case</h3>
                          <br /><br />

                          Mortgage ID Number:<br />
                          <input type="text" id="titl" />
                          <div id="titlError" style="display:none" onblur="caseValidate()">This field cannot be empty</div>
                          <br /><br />

                          Description:<br />
                          <br /><br />
                          <textarea rows="6" cols="50" id="desc" onblur="caseValidate()"> </textarea>
                          <div id="descError" style="display:none">This field cannot be empty</div>
                          <br /><br />
                          <button type="submit" class="btn btn-warning" role="button" onclick="caseSubmit()">Submit</button>
                      </form>
                      <br /><br />
                      <h3>Active Cases</h3>
                      <br />
                      <div class="jumbotron" id="bottomTable">
                          <div id="caseTable">
                              <table class="table table-hover">
                                  <thead>
                                      <tr>
                                          <th>Case ID</th>
                                          <th>Description</th>
                                      </tr>
                                  </thead>
                                  <tbody>
                                      <tr>
                                          <td>123456789</td>
                                          <td>Example Complaint. blah blah blah blah <button onclick="openCase()">More Info</button></td>

                                      </tr>

                                  </tbody>
                              </table>
                          </div>
                          <div id="case" style="display:none">
                              <button id="cancelPayment" onclick="closeCase()" type="button" class="close" aria-label="Close">
                                  <span aria-hidden="true">&times;</span>
                              </button>
                              <br /><br />
                              Details of the case here.
                              <br /><br />
                              blah blah blah blah<br />
                              blah blah blah...
                          </div>

                      </div>

                  </div>

                  <div id="help" style="display:none">
                      

                  </div>

              </div>

              </div>
    <footer class="page-footer font-small blue pt-4" id="foot">
        <div class="container-fluid text-center text-md-left">

            <div class="row">
                <div class="col-md-6 mt-md-0 mt-3">
                    <h5 class="text-small">All content on this site is the exclusive property of Mortàge LLC</h5>

                </div>

                <hr class="clearfix w-100 d-md-none pb-3">

            </div>

        </div>
        <div class="footer-copyright text-center py-3">
            © 2018 Copyright:
            <a href="https://revature.com/"> https://mortàge.com</a>
        </div>
    </footer>






</body>
</html>